## 前端优化

### 图片优化

> 原则：结合业务场景选择正确的图片格式；在图片不失真的情况下，图片大小达到最小；使用cdn进行引入。

> 工具：推荐[tinypng](https://tinypng.com/)图片压缩工具；[编码BASE64](https://tool.css-js.com/base64.html)的转换工具。

#### 1. JPEG/JPG

**有损压缩、体积小、加载快、不支持透明**

适合呈现色彩丰富而且尺寸大的图片。不能过分压缩，会显示出毛边。

#### 2. WEPB

**年轻的全能型**

WebP格式，图片的体积能够压缩到JPEG/JPG的2/3，能节省大量的服务器带宽资源和数据空间。在移动端上面使用比较合理，但是这是谷歌开发的图片格式。目前支持的情况：android原生和chrome浏览器支持WebP，iOS原生和safari浏览器尚不支持WebP。其他浏览器方面，除了opera外，都还不支持。业务量和并发量不大的情况下，还是别用这种格式，节省成本的操作另说了～

#### 3. PNG

**无损压缩、质量高、体积大、支持透明**

这里有PNG-8和PNG-24，两者可以说在显示色彩丰富度上面差别大，PNG-8可以显示2^8种颜色,而PNG-24可以显示2^24种颜色。PNG可以处理好线条间的关系，避免毛边，支持透明，但是体积大。根据色彩和应用场景的需求合理采用PNG-8或PNG-24。

#### 4. SVG

**文本文件、体积小、不失真、兼容性好**

svg从**1999年**被w3c列入开放标准，它的优点正如其名`可伸缩矢量图形`，能够在缩放的情况下不失真。而且，兼容性好，和性能关系最密切的一点就是：SVG 与 PNG 和 JPG 相比，文件体积更小，可压缩性更强。但是其学习成本高，可见[W3school的svg教程](http://www.w3school.com.cn/svg/index.asp)，还有其渲染成本比较高。

#### 5. BASE64

**文本文件，依赖编码、小图标解决方案**

图片转换成Base64后，会增加其体积的3/4左右，在处理小图标的时候比较理想，可以这么理解为下载图标的速度快过http的响应速度。一般是2kb左右的图标使用这种比较理想，大图就不建议使用了。[编码BASE64](https://tool.css-js.com/base64.html)可以轻松帮我们实现转换。

#### 6. GIF

**可动图，无损压缩、支持透明**

前端页面中使用到动画图片的情况下，我们第一想法就是使用gif图片来实现。但是如果不是循环播放的图片的话，关键帧@keyframe会更加适合。

目前，前端领域用到的图片格式上面的居多，其他图片格式感兴趣可以戳[传送门](https://baike.baidu.com/item/%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F/381122?fr=aladdin)

#### 补充

在减少http请求的场景下，`精灵图`也是一个很好的选择，也是针对像BASE64那样的小图标，不过看你的使用场景。个人比较偏向`BASE64`处理，因为在现代飞速发展的时代，移动设备普及，5g都将横行了，带来的些许大小差距是可以忽略不计的。而`BASE64`能更好的把握开发节奏~


### 缓存

浏览器缓存机制有四个方面，他们按照获取资源时请求的优先级依次排列如下：

1. Memory Cache
2. Service Worker Cache
3. HTTP Cache
4. Push Cache (HTTP2的新特性)

### MemoryCache

MemoryCache，是指存在内存中的缓存。从优先级上来说，它是浏览器最先尝试去命中的一种缓存。从效率上来说，它是响应速度最快的一种缓存。

根据掘金上**修言前辈**的总结可以知道：资源存不存在内存，浏览器秉承的是`节约原则`。我们发现，BASE64格式的图片，几乎永远可以被塞进memory cache，这可以视为浏览器为了节省渲染开销的“自保行为”；此外，体积不大的`JS、CSS`文件，也有较大地被写入内存的几率--相比之下，较大的`JS、CSS`文件就没有这个待遇了，内存是有限的，他们往往被直接摔进磁盘。

### Service Worker Cache

Service Worker 是一种独立于主线程之外的Javascript线程。它脱离于浏览器窗体，因此无法访问DOM。这样独立的个性使得Service Worker的“个人行为”无法干扰页面的性能，这个`幕后工作者`可以帮我们实现离线缓存，消息推送和网络代理等功能。借助Service Worker实现的离线缓存就称为**Service Worker Cache**。

> 有待补充
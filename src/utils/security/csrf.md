## 跨站点请求伪造（CSRF）

CSRF的全称是`Cross Site Request Forgery`，中文名是跨站请求伪造。

原理是：攻击者构建网站后台某个功能接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。用户在登陆状态下这个请求被服务端接收后被误以为是用户的合法操作。

对于GET形式的接口地址可以轻易被攻击，对于POST形式的接口地址也不是百分百安全，攻击者可诱导用户进入带Form表单可用POST方式提交参数的页面。

### 防御

#### 验证码

验证码被认为是对抗CSRF攻击最有效的防御方法。

CSRF攻击的过程，往往是用户不知情的情况下构建网络请求。而验证码，则强制用户与应用进行交互，才能完成最终请求。因此在通常情况下，验证码能够很好地遏制CSRF攻击。

#### Referer Check

**Referer Check**在互联网中最常见的应用就是“防止图片盗链”。同理，`Referer Check`也可以被用于检查请求是否来自合法的“源”。

比如一个“论坛发帖”的操作，在正常的情况下需要先登陆到用户后台，或者访问能偶发帖的的页面。在**提交**发帖表单的时候，Referer值必然是发帖表单所在的页面。如果`Referer`的值不是这个页面，甚至不是发帖网站的域，那极有可能是CSRF攻击。

**Referer Check的缺陷在于，服务器并非什么时候都能取到Referer**。

#### anti CSRF Token

可以参考文章：https://zhuanlan.zhihu.com/p/22521378